AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/css

################################################################################

RewriteEngine On

RewriteCond %{HTTPS} off
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule .* https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{HTTP_USER_AGENT} archive.org_bot [NC]
RewriteRule ^.* - [L,R=403]

RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !www.jangabler.de [NC]
RewriteRule \.(svg|webp|png)$ - [F,NC]

################################################################################

Header always set strict-transport-security "max-age=31536000; includeSubDomains"
Header set content-security-policy "default-src 'self'"
Header set referrer-policy "no-referrer"
Header set x-content-type-options "nosniff"
Header set x-frame-options "deny"

################################################################################

ErrorDocument 403 /403.html
ErrorDocument 404 /404.html
ErrorDocument 500 /500.html
